<!DOCTYPE html>
<html lang="es">
<head>
  <title>Despliegue con Podman y httpd</title>
  <link rel="stylesheet" href="style.css"> 
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div class="global-wrapper">

    <header class="global-header">
      <h1><a>Blog de Kbilbao sobre la actividad 1</a></h1>
    </header>

    <nav class="main-nav">
      <a href="entrada-1.html">Entrada 1: Creación con Gatsby</a>
      <a href="entrada-2.html">Entrada 2: Evolución de Estilos CSS</a>
      <a href="entrada-3.html">Entrada 3: Gestión de Imágenes (Lightbox)</a>

    </nav>

    <main>
      <article class="blog-post">

        <header>
          <h1>Despliegue del Blog con Podman, Fedora y httpd</h1>
          <p>1 de noviembre de 2025</p>
        </header>

        <hr>

        <section>
          
          <p>Ya tenemos nuestras entradas de blog como archivos HTML estáticos (<code>entrada-1.html</code>, <code>entrada-2.html</code>, esta misma) y nuestra hoja de estilos (<code>style.css</code>).</p>
          <p>Ahora, el siguiente paso lógico es "servirlas" en un servidor web real. En lugar de instalar software en nuestra máquina, usaremos contenedores para empaquetar la aplicación. Vamos a crear una imagen de **Podman** que use **Fedora** e instale el servidor web **httpd** (Apache) para mostrar nuestro blog.</p>

          <h2>¿Qué es Podman y httpd?</h2>
          <p>
            <ul>
              <li><strong>Podman:</strong> Es un motor de contenedores sin demonio, una alternativa popular a Docker. Nos permite construir y ejecutar contenedores aislados.</li>
              <li><strong>httpd:</strong> Es el nombre del software del Servidor HTTP Apache, uno de los servidores web más robustos y utilizados del mundo. Es perfecto para servir archivos estáticos como los nuestros.</li>
            </ul>
          </p>
          
          <h2>1. El Fichero de Instrucciones (Dockerfile)</h2>
          <p>
            Para construir una imagen, necesitamos un fichero de instrucciones. Por convención, se suele llamar <code>Dockerfile</code> (aunque Podman a veces prefiere <code>Containerfile</code>).
          </p>
          <p>Crea un archivo llamado <code>Dockerfile</code> en la misma carpeta donde tienes tus archivos <code>.html</code> y <code>.css</code>:</p>

<pre><code># 1. Empezamos desde una imagen base de Fedora
FROM fedora:latest

# 2. Instalamos el servidor web Apache (httpd)
#    Usamos 'dnf -y' para aceptar automáticamente
#    y 'dnf clean all' para reducir el tamaño de la imagen
RUN dnf -y install httpd && dnf clean all

# 3. Copiamos los archivos de nuestro blog
#    Copiamos todos los .html y .css del directorio actual
#    al directorio web por defecto de Apache
COPY *.html /var/www/html/
COPY *.css /var/www/html/

# 4. Exponemos el puerto 80
#    httpd escucha en el puerto 80 por defecto
EXPOSE 80

# 5. El comando para arrancar el servidor
#    Usamos '-D FOREGROUND' para que httpd se ejecute 
#    en primer plano y mantenga el contenedor vivo.
CMD ["/usr/sbin/httpd", "-D", "FOREGROUND"]</code></pre>

          <h2>2. Construir la Imagen con Podman</h2>
          <p>
            Ahora, abre una terminal en el directorio donde tienes todos tus archivos (<code>entrada-1.html</code>, <code>style.css</code>, y el <code>Dockerfile</code>) y ejecuta el comando de construcción:
          </p>

<pre><code># 'podman build' lee el Dockerfile
# '-t mi-blog-web' le da un nombre (tag) a nuestra imagen
# '.' indica que el Dockerfile está en el directorio actual

podman build -t mi-blog-web .</code></pre>

          <p>Podman descargará la imagen de Fedora, ejecutará los comandos de instalación y copiará tus archivos dentro de la nueva imagen llamada <code>mi-blog-web</code>.</p>


          <h2>3. Ejecutar el Contenedor</h2>
          <p>
            Una vez que la imagen está construida, podemos "ejecutarla" como un contenedor.
          </p>

<pre><code># 'podman run' crea un nuevo contenedor desde nuestra imagen
# '-d' (detached): ejecuta el contenedor en segundo plano
# '--name mi-blog': le da un nombre fácil de recordar
# '-p 8080:80': mapea el puerto 8080 de tu máquina (host)
#               al puerto 80 del contenedor (donde escucha httpd)
# 'mi-blog-web': la imagen que queremos usar

podman run -d --name mi-blog -p 8080:80 mi-blog-web</code></pre>

          <h2>4. ¡Blog Servido!</h2>
          <p>
            ¡Ya está! Si todo ha ido bien, el contenedor está corriendo.
          </p>
          <p>
            Abre tu navegador web y visita <code>http://localhost:8080</code>. Deberías ver la página de inicio (que probablemente sea una de tus entradas). Si navegas a <code>http://localhost:8080/entrada-1.html</code> o <code>http://localhost:8080/entrada-3.html</code>, verás cada una de las entradas de tu blog servidas por Apache desde dentro de un contenedor Podman.
          </p>

        </section>

      </article>
    </main>

    <footer>
      © 2025, Construido con Gatsby - Modificado en VsCode + Live Server
    </footer>

  </div> 
</body>
</html>